<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <title>Slumpa pastarecept</title>
  <!-- <style>
    body { font-family: system-ui, sans-serif; margin: 2rem; }
    #result { margin-top: 1rem; padding: .75rem; background: #f6f6f6; border-radius: 8px; }
    button { padding: .5rem .9rem; }
  </style> -->

      <!-- Stylesheets and fonts -->

    <link rel="stylesheet" href=css/styles.css>
    
    <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Crimson+Pro"
  />

  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">


</head>
<body>
  <h1>Slumpa recept</h1>
  <button id="btn">Slumpa!</button>
  <pre id="result">Klicka på “Slumpa!”</pre>

  <script>
    async function getData() {
      const res = await fetch('data.json');         // Laddar JSON-arrayen
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.json();
    }

    // Säkrare slump för webben (använder Web Crypto om finns)
    function randomIndex(max) {
      if (window.crypto && window.crypto.getRandomValues) {
        const array = new Uint32Array(1);
        window.crypto.getRandomValues(array);
        return array[0] % max;
      }
      // Fallback
      return Math.floor(Math.random() * max);
    }

    function pickRandom(arr) {
      if (!Array.isArray(arr) || arr.length === 0) {
        throw new Error('Arrayen är tom eller ogiltig.');
      }
      return arr[randomIndex(arr.length)];
    }

    (async () => {
      try {
        const data = await getData();
        const btn = document.getElementById('btn');
        const out = document.getElementById('result');

        btn.addEventListener('click', () => {
          try {
            const item = pickRandom(data);
            out.textContent = JSON.stringify(item, null, 2);
          } catch (e) {
            out.textContent = 'Fel: ' + e.message;
          }
        });
      } catch (e) {
        document.getElementById('result').textContent =
          'Kunde inte ladda data.json: ' + e.message;
      }
    })();
  </script>
</body>
</html>